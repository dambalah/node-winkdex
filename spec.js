/*globals describe, require */

var WinkDex = require('./index'),
    request = require('request'),
    nock = require('nock'),
    assert  = require('assert');

var fixtures = {};

describe('WinkDex', function() {
  beforeEach(function(callback) {
    fixtures.winkdex = new WinkDex();
    return callback();
  });
  afterEach(function(callback) {
    nock.cleanAll().bind(nock);
    callback();
  });

  describe('apiVersion', function() {
    beforeEach(function(callback) {
      fixtures.mock = nock('https://winkdex.com').get('/api').reply(302, undefined, {Location: 'https://winkdex.com/api/v0'});
      callback();
    });
    it('should fire the callback', function(done) {
      fixtures.winkdex.apiVersion(function(err, version) {
        done();
      });
    });
    it('should make an HTTP call to the API', function(done) {
      fixtures.winkdex.apiVersion(function(err, version) {
        assert.ok(fixtures.mock.isDone());
        done();
      });
    });
    it('should return a version number', function(done) {
      fixtures.winkdex.apiVersion(function(err, version) {
        assert.ok(fixtures.mock.isDone());
        assert.ok(version);
        assert.equal(typeof version, 'string');
        assert.equal(version, 'v0');
        done();
      });
    });
    it('should get the version number from the location HTTP header', function(done) {
      fixtures.winkdex.apiVersion(function(err, version) {
        assert.ok(fixtures.mock.isDone());
        assert.equal(version, 'v0');
        done();
      });
    });
  });

  describe('price', function() {
    it('should return an error if the server does so', function(done) {
      var mock = nock('https://winkdex.com').get('/api/v0/price')
          .reply(500, 'Internal Server Error');
      fixtures.winkdex.price(function(err, price) {
        assert.ok(err);
        assert.equal(err.message, 'Internal Server Error');
        done();
      });
    });
    it('should return current price by default', function(done) {
      var mock = nock('https://winkdex.com').get('/api/v0/price')
          .reply(200, {"timestamp": "2014-12-10T16:37:00Z", "price": 34969, "_links": {"self": {"href": "/api/v0/price"}}});
      fixtures.winkdex.price(function(err, price) {
        assert.ok(!err);
        assert.equal(price, 34969);
        done();
      });
    });
    it('should return the price at a specific timestamp', function(done) {
      var mock = nock('https://winkdex.com').get('/api/v0/price?time=2014-12-10T16:37:00Z')
          .reply(200, {"timestamp": "2014-12-10T16:37:00Z", "price": 34969, "_links": {"self": {"href": "/api/v0/price"}}});
      fixtures.winkdex.price("2014-12-10T16:37:00Z", function(err, price) {
        assert.ok(!err);
        assert.equal(price, 34969);
        done();
      });
    });
  });

  describe('series', function() {
    it('should return an error if the server does so', function(done) {
      var mock = nock('https://winkdex.com').get('/api/v0/series')
          .reply(500, 'Internal Server Error');
      fixtures.winkdex.series(function(err, price) {
        assert.ok(err);
        assert.equal(err.message, 'Internal Server Error');
        done();
      });
    });
    it('should return the time series for the last 6 months by default', function(done) {
      var mock = nock('https://winkdex.com').get('/api/v0/series')
          .reply(200, {"series": [{"start_time": "2014-06-10T16:00:00-04:00", "results": [{"timestamp": "2014-06-10T16:00:00-04:00", "price": 65132, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-11T16:00:00-04:00", "price": 63916, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-12T16:00:00-04:00", "price": 61272, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-13T16:00:00-04:00", "price": 58554, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-14T16:00:00-04:00", "price": 56040, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-15T16:00:00-04:00", "price": 56882, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-16T16:00:00-04:00", "price": 59997, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-17T16:00:00-04:00", "price": 59856, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-18T16:00:00-04:00", "price": 60403, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-19T16:00:00-04:00", "price": 60187, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-20T16:00:00-04:00", "price": 59066, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-21T16:00:00-04:00", "price": 59089, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-22T16:00:00-04:00", "price": 59647, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-23T16:00:00-04:00", "price": 58854, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-24T16:00:00-04:00", "price": 58772, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-25T16:00:00-04:00", "price": 56718, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-26T16:00:00-04:00", "price": 56973, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-27T16:00:00-04:00", "price": 58792, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-28T16:00:00-04:00", "price": 59557, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-29T16:00:00-04:00", "price": 59269, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-30T16:00:00-04:00", "price": 63468, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-01T16:00:00-04:00", "price": 65728, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-02T16:00:00-04:00", "price": 65566, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-03T16:00:00-04:00", "price": 63894, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-04T16:00:00-04:00", "price": 63260, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-05T16:00:00-04:00", "price": 63023, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-06T16:00:00-04:00", "price": 63508, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-07T16:00:00-04:00", "price": 62409, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-08T16:00:00-04:00", "price": 62314, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-09T16:00:00-04:00", "price": 62438, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-10T16:00:00-04:00", "price": 61837, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-11T16:00:00-04:00", "price": 62919, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-12T16:00:00-04:00", "price": 62793, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-13T16:00:00-04:00", "price": 62629, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-14T16:00:00-04:00", "price": 62146, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-15T16:00:00-04:00", "price": 62122, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-16T16:00:00-04:00", "price": 61784, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-17T16:00:00-04:00", "price": 62201, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-18T16:00:00-04:00", "price": 62682, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-19T16:00:00-04:00", "price": 62793, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-20T16:00:00-04:00", "price": 61895, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-21T16:00:00-04:00", "price": 61872, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-22T16:00:00-04:00", "price": 61925, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-23T16:00:00-04:00", "price": 61746, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-24T16:00:00-04:00", "price": 59601, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-25T16:00:00-04:00", "price": 59886, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-26T16:00:00-04:00", "price": 59358, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-27T16:00:00-04:00", "price": 58928, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-28T16:00:00-04:00", "price": 58577, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-29T16:00:00-04:00", "price": 58112, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-30T16:00:00-04:00", "price": 56826, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-31T16:00:00-04:00", "price": 58554, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-01T16:00:00-04:00", "price": 59640, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-02T16:00:00-04:00", "price": 58924, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-03T16:00:00-04:00", "price": 58391, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-04T16:00:00-04:00", "price": 58804, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-05T16:00:00-04:00", "price": 58047, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-06T16:00:00-04:00", "price": 58095, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-07T16:00:00-04:00", "price": 58875, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-08T16:00:00-04:00", "price": 58925, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-09T16:00:00-04:00", "price": 58578, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-10T16:00:00-04:00", "price": 58704, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-11T16:00:00-04:00", "price": 57668, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-12T16:00:00-04:00", "price": 57033, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-13T16:00:00-04:00", "price": 54569, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-14T16:00:00-04:00", "price": 51787, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-15T16:00:00-04:00", "price": 49329, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-16T16:00:00-04:00", "price": 50903, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-17T16:00:00-04:00", "price": 49270, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-18T16:00:00-04:00", "price": 46013, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-19T16:00:00-04:00", "price": 48729, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-20T16:00:00-04:00", "price": 51546, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-21T16:00:00-04:00", "price": 52377, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-22T16:00:00-04:00", "price": 51616, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-23T16:00:00-04:00", "price": 49777, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-24T16:00:00-04:00", "price": 51139, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-25T16:00:00-04:00", "price": 50302, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-26T16:00:00-04:00", "price": 51039, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-27T16:00:00-04:00", "price": 51384, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-28T16:00:00-04:00", "price": 50837, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-29T16:00:00-04:00", "price": 50970, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-30T16:00:00-04:00", "price": 50139, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-31T16:00:00-04:00", "price": 47875, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-01T16:00:00-04:00", "price": 48112, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-02T16:00:00-04:00", "price": 47943, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-03T16:00:00-04:00", "price": 47204, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-04T16:00:00-04:00", "price": 48691, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-05T16:00:00-04:00", "price": 48103, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-06T16:00:00-04:00", "price": 48274, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-07T16:00:00-04:00", "price": 48108, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-08T16:00:00-04:00", "price": 47261, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-09T16:00:00-04:00", "price": 46972, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-10T16:00:00-04:00", "price": 48408, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-11T16:00:00-04:00", "price": 47192, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-12T16:00:00-04:00", "price": 47115, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-13T16:00:00-04:00", "price": 47840, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-14T16:00:00-04:00", "price": 47751, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-15T16:00:00-04:00", "price": 47205, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-16T16:00:00-04:00", "price": 46555, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-17T16:00:00-04:00", "price": 44711, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-18T16:00:00-04:00", "price": 41586, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-19T16:00:00-04:00", "price": 39706, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-20T16:00:00-04:00", "price": 40610, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-21T16:00:00-04:00", "price": 40294, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-22T16:00:00-04:00", "price": 39898, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-23T16:00:00-04:00", "price": 43246, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-24T16:00:00-04:00", "price": 42728, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-25T16:00:00-04:00", "price": 40766, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-26T16:00:00-04:00", "price": 40367, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-27T16:00:00-04:00", "price": 39784, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-28T16:00:00-04:00", "price": 38034, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-29T16:00:00-04:00", "price": 37689, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-30T16:00:00-04:00", "price": 38855, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-01T16:00:00-04:00", "price": 38291, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-02T16:00:00-04:00", "price": 37463, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-03T16:00:00-04:00", "price": 35976, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-04T16:00:00-04:00", "price": 33148, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-05T16:00:00-04:00", "price": 30612, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-06T16:00:00-04:00", "price": 33141, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-07T16:00:00-04:00", "price": 32893, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-08T16:00:00-04:00", "price": 34491, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-09T16:00:00-04:00", "price": 37464, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-10T16:00:00-04:00", "price": 35689, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-11T16:00:00-04:00", "price": 35974, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-12T16:00:00-04:00", "price": 36944, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-13T16:00:00-04:00", "price": 38242, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-14T16:00:00-04:00", "price": 40855, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-15T16:00:00-04:00", "price": 39081, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-16T16:00:00-04:00", "price": 37333, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-17T16:00:00-04:00", "price": 38165, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-18T16:00:00-04:00", "price": 38752, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-19T16:00:00-04:00", "price": 38856, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-20T16:00:00-04:00", "price": 38132, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-21T16:00:00-04:00", "price": 38586, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-22T16:00:00-04:00", "price": 38199, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-23T16:00:00-04:00", "price": 36252, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-24T16:00:00-04:00", "price": 35669, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-25T16:00:00-04:00", "price": 34886, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-26T16:00:00-04:00", "price": 35334, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-27T16:00:00-04:00", "price": 35491, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-28T16:00:00-04:00", "price": 35435, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-29T16:00:00-04:00", "price": 33986, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-30T16:00:00-04:00", "price": 34421, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-31T16:00:00-04:00", "price": 33971, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-01T16:00:00-04:00", "price": 32208, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-02T16:00:00-05:00", "price": 32452, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-03T16:00:00-05:00", "price": 32654, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-04T16:00:00-05:00", "price": 32802, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-05T16:00:00-05:00", "price": 34037, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-06T16:00:00-05:00", "price": 34943, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-07T16:00:00-05:00", "price": 34197, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-08T16:00:00-05:00", "price": 34412, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-09T16:00:00-05:00", "price": 35809, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-10T16:00:00-05:00", "price": 37138, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-11T16:00:00-05:00", "price": 36555, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-12T16:00:00-05:00", "price": 41996, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-13T16:00:00-05:00", "price": 40372, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-14T16:00:00-05:00", "price": 39451, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-15T16:00:00-05:00", "price": 37445, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-16T16:00:00-05:00", "price": 38839, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-17T16:00:00-05:00", "price": 38293, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-18T16:00:00-05:00", "price": 37600, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-19T16:00:00-05:00", "price": 37412, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-20T16:00:00-05:00", "price": 35957, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-21T16:00:00-05:00", "price": 35259, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-22T16:00:00-05:00", "price": 35699, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-23T16:00:00-05:00", "price": 36286, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-24T16:00:00-05:00", "price": 38617, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-25T16:00:00-05:00", "price": 37919, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-26T16:00:00-05:00", "price": 36747, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-27T16:00:00-05:00", "price": 36762, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-28T16:00:00-05:00", "price": 38014, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-29T16:00:00-05:00", "price": 37410, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-30T16:00:00-05:00", "price": 37600, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-01T16:00:00-05:00", "price": 37806, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-02T16:00:00-05:00", "price": 37910, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-03T16:00:00-05:00", "price": 37774, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-04T16:00:00-05:00", "price": 37230, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-05T16:00:00-05:00", "price": 37705, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-06T16:00:00-05:00", "price": 37523, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-07T16:00:00-05:00", "price": 37395, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-08T16:00:00-05:00", "price": 36585, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-09T16:00:00-05:00", "price": 35202, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}], "resolution": "1d", "name": "winkdexUSD", "end_time": "2014-12-10T16:00:00-05:00"}], "_links": {"self": {"href": "/api/v0/series"}}});
      fixtures.winkdex.series(function(err, series) {
        assert.ok(!err);
        assert.ok(series);
        assert.ok(Array.isArray(series.results));
        assert.equal(series.resolution, '1d');
        assert.ok(series.results.length > 180); // 6 months should have at least 180 days
        assert.equal(series.end_time.slice(0,10), '2014-12-10');
        done();
      });
    });
    it('should return the time series from start time to now if used with two arguments', function(done) {
      var yesterday = new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      var mock = nock('https://winkdex.com').get('/api/v0/series?start_time=' + yesterday.toISOString())
          .reply(200, {"series": [{"start_time": "2014-06-10T16:00:00-04:00", "results": [{"timestamp": "2014-06-10T16:00:00-04:00", "price": 65132, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-11T16:00:00-04:00", "price": 63916, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-12T16:00:00-04:00", "price": 61272, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-13T16:00:00-04:00", "price": 58554, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-14T16:00:00-04:00", "price": 56040, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-15T16:00:00-04:00", "price": 56882, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-16T16:00:00-04:00", "price": 59997, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-17T16:00:00-04:00", "price": 59856, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-18T16:00:00-04:00", "price": 60403, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-19T16:00:00-04:00", "price": 60187, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-20T16:00:00-04:00", "price": 59066, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-21T16:00:00-04:00", "price": 59089, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-22T16:00:00-04:00", "price": 59647, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-23T16:00:00-04:00", "price": 58854, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-24T16:00:00-04:00", "price": 58772, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-25T16:00:00-04:00", "price": 56718, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-26T16:00:00-04:00", "price": 56973, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-27T16:00:00-04:00", "price": 58792, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-28T16:00:00-04:00", "price": 59557, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-29T16:00:00-04:00", "price": 59269, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-30T16:00:00-04:00", "price": 63468, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-01T16:00:00-04:00", "price": 65728, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-02T16:00:00-04:00", "price": 65566, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-03T16:00:00-04:00", "price": 63894, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-04T16:00:00-04:00", "price": 63260, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-05T16:00:00-04:00", "price": 63023, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-06T16:00:00-04:00", "price": 63508, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-07T16:00:00-04:00", "price": 62409, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-08T16:00:00-04:00", "price": 62314, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-09T16:00:00-04:00", "price": 62438, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-10T16:00:00-04:00", "price": 61837, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-11T16:00:00-04:00", "price": 62919, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-12T16:00:00-04:00", "price": 62793, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-13T16:00:00-04:00", "price": 62629, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-14T16:00:00-04:00", "price": 62146, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-15T16:00:00-04:00", "price": 62122, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-16T16:00:00-04:00", "price": 61784, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-17T16:00:00-04:00", "price": 62201, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-18T16:00:00-04:00", "price": 62682, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-19T16:00:00-04:00", "price": 62793, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-20T16:00:00-04:00", "price": 61895, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-21T16:00:00-04:00", "price": 61872, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-22T16:00:00-04:00", "price": 61925, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-23T16:00:00-04:00", "price": 61746, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-24T16:00:00-04:00", "price": 59601, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-25T16:00:00-04:00", "price": 59886, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-26T16:00:00-04:00", "price": 59358, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-27T16:00:00-04:00", "price": 58928, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-28T16:00:00-04:00", "price": 58577, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-29T16:00:00-04:00", "price": 58112, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-30T16:00:00-04:00", "price": 56826, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-31T16:00:00-04:00", "price": 58554, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-01T16:00:00-04:00", "price": 59640, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-02T16:00:00-04:00", "price": 58924, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-03T16:00:00-04:00", "price": 58391, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-04T16:00:00-04:00", "price": 58804, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-05T16:00:00-04:00", "price": 58047, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-06T16:00:00-04:00", "price": 58095, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-07T16:00:00-04:00", "price": 58875, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-08T16:00:00-04:00", "price": 58925, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-09T16:00:00-04:00", "price": 58578, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-10T16:00:00-04:00", "price": 58704, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-11T16:00:00-04:00", "price": 57668, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-12T16:00:00-04:00", "price": 57033, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-13T16:00:00-04:00", "price": 54569, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-14T16:00:00-04:00", "price": 51787, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-15T16:00:00-04:00", "price": 49329, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-16T16:00:00-04:00", "price": 50903, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-17T16:00:00-04:00", "price": 49270, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-18T16:00:00-04:00", "price": 46013, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-19T16:00:00-04:00", "price": 48729, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-20T16:00:00-04:00", "price": 51546, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-21T16:00:00-04:00", "price": 52377, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-22T16:00:00-04:00", "price": 51616, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-23T16:00:00-04:00", "price": 49777, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-24T16:00:00-04:00", "price": 51139, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-25T16:00:00-04:00", "price": 50302, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-26T16:00:00-04:00", "price": 51039, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-27T16:00:00-04:00", "price": 51384, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-28T16:00:00-04:00", "price": 50837, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-29T16:00:00-04:00", "price": 50970, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-30T16:00:00-04:00", "price": 50139, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-31T16:00:00-04:00", "price": 47875, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-01T16:00:00-04:00", "price": 48112, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-02T16:00:00-04:00", "price": 47943, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-03T16:00:00-04:00", "price": 47204, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-04T16:00:00-04:00", "price": 48691, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-05T16:00:00-04:00", "price": 48103, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-06T16:00:00-04:00", "price": 48274, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-07T16:00:00-04:00", "price": 48108, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-08T16:00:00-04:00", "price": 47261, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-09T16:00:00-04:00", "price": 46972, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-10T16:00:00-04:00", "price": 48408, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-11T16:00:00-04:00", "price": 47192, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-12T16:00:00-04:00", "price": 47115, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-13T16:00:00-04:00", "price": 47840, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-14T16:00:00-04:00", "price": 47751, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-15T16:00:00-04:00", "price": 47205, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-16T16:00:00-04:00", "price": 46555, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-17T16:00:00-04:00", "price": 44711, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-18T16:00:00-04:00", "price": 41586, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-19T16:00:00-04:00", "price": 39706, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-20T16:00:00-04:00", "price": 40610, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-21T16:00:00-04:00", "price": 40294, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-22T16:00:00-04:00", "price": 39898, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-23T16:00:00-04:00", "price": 43246, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-24T16:00:00-04:00", "price": 42728, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-25T16:00:00-04:00", "price": 40766, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-26T16:00:00-04:00", "price": 40367, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-27T16:00:00-04:00", "price": 39784, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-28T16:00:00-04:00", "price": 38034, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-29T16:00:00-04:00", "price": 37689, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-30T16:00:00-04:00", "price": 38855, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-01T16:00:00-04:00", "price": 38291, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-02T16:00:00-04:00", "price": 37463, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-03T16:00:00-04:00", "price": 35976, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-04T16:00:00-04:00", "price": 33148, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-05T16:00:00-04:00", "price": 30612, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-06T16:00:00-04:00", "price": 33141, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-07T16:00:00-04:00", "price": 32893, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-08T16:00:00-04:00", "price": 34491, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-09T16:00:00-04:00", "price": 37464, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-10T16:00:00-04:00", "price": 35689, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-11T16:00:00-04:00", "price": 35974, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-12T16:00:00-04:00", "price": 36944, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-13T16:00:00-04:00", "price": 38242, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-14T16:00:00-04:00", "price": 40855, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-15T16:00:00-04:00", "price": 39081, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-16T16:00:00-04:00", "price": 37333, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-17T16:00:00-04:00", "price": 38165, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-18T16:00:00-04:00", "price": 38752, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-19T16:00:00-04:00", "price": 38856, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-20T16:00:00-04:00", "price": 38132, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-21T16:00:00-04:00", "price": 38586, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-22T16:00:00-04:00", "price": 38199, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-23T16:00:00-04:00", "price": 36252, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-24T16:00:00-04:00", "price": 35669, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-25T16:00:00-04:00", "price": 34886, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-26T16:00:00-04:00", "price": 35334, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-27T16:00:00-04:00", "price": 35491, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-28T16:00:00-04:00", "price": 35435, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-29T16:00:00-04:00", "price": 33986, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-30T16:00:00-04:00", "price": 34421, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-31T16:00:00-04:00", "price": 33971, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-01T16:00:00-04:00", "price": 32208, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-02T16:00:00-05:00", "price": 32452, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-03T16:00:00-05:00", "price": 32654, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-04T16:00:00-05:00", "price": 32802, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-05T16:00:00-05:00", "price": 34037, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-06T16:00:00-05:00", "price": 34943, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-07T16:00:00-05:00", "price": 34197, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-08T16:00:00-05:00", "price": 34412, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-09T16:00:00-05:00", "price": 35809, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-10T16:00:00-05:00", "price": 37138, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-11T16:00:00-05:00", "price": 36555, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-12T16:00:00-05:00", "price": 41996, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-13T16:00:00-05:00", "price": 40372, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-14T16:00:00-05:00", "price": 39451, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-15T16:00:00-05:00", "price": 37445, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-16T16:00:00-05:00", "price": 38839, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-17T16:00:00-05:00", "price": 38293, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-18T16:00:00-05:00", "price": 37600, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-19T16:00:00-05:00", "price": 37412, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-20T16:00:00-05:00", "price": 35957, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-21T16:00:00-05:00", "price": 35259, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-22T16:00:00-05:00", "price": 35699, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-23T16:00:00-05:00", "price": 36286, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-24T16:00:00-05:00", "price": 38617, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-25T16:00:00-05:00", "price": 37919, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-26T16:00:00-05:00", "price": 36747, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-27T16:00:00-05:00", "price": 36762, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-28T16:00:00-05:00", "price": 38014, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-29T16:00:00-05:00", "price": 37410, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-30T16:00:00-05:00", "price": 37600, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-01T16:00:00-05:00", "price": 37806, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-02T16:00:00-05:00", "price": 37910, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-03T16:00:00-05:00", "price": 37774, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-04T16:00:00-05:00", "price": 37230, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-05T16:00:00-05:00", "price": 37705, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-06T16:00:00-05:00", "price": 37523, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-07T16:00:00-05:00", "price": 37395, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-08T16:00:00-05:00", "price": 36585, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-09T16:00:00-05:00", "price": 35202, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}], "resolution": "1d", "name": "winkdexUSD", "end_time": "2014-12-10T16:00:00-05:00"}], "_links": {"self": {"href": "/api/v0/series"}}});
      fixtures.winkdex.series(yesterday, function(err, series) {
        assert.ok(!err);
        assert.ok(series);
        assert.ok(Array.isArray(series.results));
        assert.equal(series.resolution, '1d');
        assert.equal(series.results.length, 183 );
        assert.equal(series.start_time.slice(0,10), '2014-06-10');
        assert.equal(series.end_time.slice(0,10), '2014-12-10');
        done();
      });
    });
    it('should return the time series for the time specified', function(done) {
       var yesterday = new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      var twoDaysAgo = new Date();
      twoDaysAgo.setDate(twoDaysAgo.getDate() - 2);
      var mock = nock('https://winkdex.com').get('/api/v0/series?start_time=' + yesterday.toISOString() + '&end_time=' + twoDaysAgo.toISOString() )
          .reply(200, {"series": [{"start_time": "2014-06-10T16:00:00-04:00", "results": [{"timestamp": "2014-06-10T16:00:00-04:00", "price": 65132, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-11T16:00:00-04:00", "price": 63916, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-12T16:00:00-04:00", "price": 61272, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-13T16:00:00-04:00", "price": 58554, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-14T16:00:00-04:00", "price": 56040, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-15T16:00:00-04:00", "price": 56882, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-16T16:00:00-04:00", "price": 59997, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-17T16:00:00-04:00", "price": 59856, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-18T16:00:00-04:00", "price": 60403, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-19T16:00:00-04:00", "price": 60187, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-20T16:00:00-04:00", "price": 59066, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-21T16:00:00-04:00", "price": 59089, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-22T16:00:00-04:00", "price": 59647, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-23T16:00:00-04:00", "price": 58854, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-24T16:00:00-04:00", "price": 58772, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-25T16:00:00-04:00", "price": 56718, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-26T16:00:00-04:00", "price": 56973, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-27T16:00:00-04:00", "price": 58792, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-28T16:00:00-04:00", "price": 59557, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-29T16:00:00-04:00", "price": 59269, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-06-30T16:00:00-04:00", "price": 63468, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-01T16:00:00-04:00", "price": 65728, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-02T16:00:00-04:00", "price": 65566, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-03T16:00:00-04:00", "price": 63894, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-04T16:00:00-04:00", "price": 63260, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-05T16:00:00-04:00", "price": 63023, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-06T16:00:00-04:00", "price": 63508, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-07T16:00:00-04:00", "price": 62409, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-08T16:00:00-04:00", "price": 62314, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-09T16:00:00-04:00", "price": 62438, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-10T16:00:00-04:00", "price": 61837, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-11T16:00:00-04:00", "price": 62919, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-12T16:00:00-04:00", "price": 62793, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-13T16:00:00-04:00", "price": 62629, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-14T16:00:00-04:00", "price": 62146, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-15T16:00:00-04:00", "price": 62122, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-16T16:00:00-04:00", "price": 61784, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-17T16:00:00-04:00", "price": 62201, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-18T16:00:00-04:00", "price": 62682, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-19T16:00:00-04:00", "price": 62793, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-20T16:00:00-04:00", "price": 61895, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-21T16:00:00-04:00", "price": 61872, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-22T16:00:00-04:00", "price": 61925, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-23T16:00:00-04:00", "price": 61746, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-24T16:00:00-04:00", "price": 59601, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-25T16:00:00-04:00", "price": 59886, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-26T16:00:00-04:00", "price": 59358, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-27T16:00:00-04:00", "price": 58928, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-28T16:00:00-04:00", "price": 58577, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-29T16:00:00-04:00", "price": 58112, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-30T16:00:00-04:00", "price": 56826, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-07-31T16:00:00-04:00", "price": 58554, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-01T16:00:00-04:00", "price": 59640, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-02T16:00:00-04:00", "price": 58924, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-03T16:00:00-04:00", "price": 58391, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-04T16:00:00-04:00", "price": 58804, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-05T16:00:00-04:00", "price": 58047, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-06T16:00:00-04:00", "price": 58095, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-07T16:00:00-04:00", "price": 58875, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-08T16:00:00-04:00", "price": 58925, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-09T16:00:00-04:00", "price": 58578, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-10T16:00:00-04:00", "price": 58704, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-11T16:00:00-04:00", "price": 57668, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-12T16:00:00-04:00", "price": 57033, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-13T16:00:00-04:00", "price": 54569, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-14T16:00:00-04:00", "price": 51787, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-15T16:00:00-04:00", "price": 49329, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-16T16:00:00-04:00", "price": 50903, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-17T16:00:00-04:00", "price": 49270, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-18T16:00:00-04:00", "price": 46013, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-19T16:00:00-04:00", "price": 48729, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-20T16:00:00-04:00", "price": 51546, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-21T16:00:00-04:00", "price": 52377, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-22T16:00:00-04:00", "price": 51616, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-23T16:00:00-04:00", "price": 49777, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-24T16:00:00-04:00", "price": 51139, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-25T16:00:00-04:00", "price": 50302, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-26T16:00:00-04:00", "price": 51039, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-27T16:00:00-04:00", "price": 51384, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-28T16:00:00-04:00", "price": 50837, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-29T16:00:00-04:00", "price": 50970, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-30T16:00:00-04:00", "price": 50139, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-08-31T16:00:00-04:00", "price": 47875, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-01T16:00:00-04:00", "price": 48112, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-02T16:00:00-04:00", "price": 47943, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-03T16:00:00-04:00", "price": 47204, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-04T16:00:00-04:00", "price": 48691, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-05T16:00:00-04:00", "price": 48103, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-06T16:00:00-04:00", "price": 48274, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-07T16:00:00-04:00", "price": 48108, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-08T16:00:00-04:00", "price": 47261, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-09T16:00:00-04:00", "price": 46972, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-10T16:00:00-04:00", "price": 48408, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-11T16:00:00-04:00", "price": 47192, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-12T16:00:00-04:00", "price": 47115, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-13T16:00:00-04:00", "price": 47840, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-14T16:00:00-04:00", "price": 47751, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-15T16:00:00-04:00", "price": 47205, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-16T16:00:00-04:00", "price": 46555, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-17T16:00:00-04:00", "price": 44711, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-18T16:00:00-04:00", "price": 41586, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-19T16:00:00-04:00", "price": 39706, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-20T16:00:00-04:00", "price": 40610, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-21T16:00:00-04:00", "price": 40294, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-22T16:00:00-04:00", "price": 39898, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-23T16:00:00-04:00", "price": 43246, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-24T16:00:00-04:00", "price": 42728, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-25T16:00:00-04:00", "price": 40766, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-26T16:00:00-04:00", "price": 40367, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-27T16:00:00-04:00", "price": 39784, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-28T16:00:00-04:00", "price": 38034, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-29T16:00:00-04:00", "price": 37689, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-09-30T16:00:00-04:00", "price": 38855, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-01T16:00:00-04:00", "price": 38291, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-02T16:00:00-04:00", "price": 37463, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-03T16:00:00-04:00", "price": 35976, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-04T16:00:00-04:00", "price": 33148, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-05T16:00:00-04:00", "price": 30612, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-06T16:00:00-04:00", "price": 33141, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-07T16:00:00-04:00", "price": 32893, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-08T16:00:00-04:00", "price": 34491, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-09T16:00:00-04:00", "price": 37464, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-10T16:00:00-04:00", "price": 35689, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-11T16:00:00-04:00", "price": 35974, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-12T16:00:00-04:00", "price": 36944, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-13T16:00:00-04:00", "price": 38242, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-14T16:00:00-04:00", "price": 40855, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-15T16:00:00-04:00", "price": 39081, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-16T16:00:00-04:00", "price": 37333, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-17T16:00:00-04:00", "price": 38165, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-18T16:00:00-04:00", "price": 38752, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-19T16:00:00-04:00", "price": 38856, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-20T16:00:00-04:00", "price": 38132, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-21T16:00:00-04:00", "price": 38586, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-22T16:00:00-04:00", "price": 38199, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-23T16:00:00-04:00", "price": 36252, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-24T16:00:00-04:00", "price": 35669, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-25T16:00:00-04:00", "price": 34886, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-26T16:00:00-04:00", "price": 35334, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-27T16:00:00-04:00", "price": 35491, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-28T16:00:00-04:00", "price": 35435, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-29T16:00:00-04:00", "price": 33986, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-30T16:00:00-04:00", "price": 34421, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-10-31T16:00:00-04:00", "price": 33971, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-01T16:00:00-04:00", "price": 32208, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-02T16:00:00-05:00", "price": 32452, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-03T16:00:00-05:00", "price": 32654, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-04T16:00:00-05:00", "price": 32802, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-05T16:00:00-05:00", "price": 34037, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-06T16:00:00-05:00", "price": 34943, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-07T16:00:00-05:00", "price": 34197, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-08T16:00:00-05:00", "price": 34412, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-09T16:00:00-05:00", "price": 35809, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-10T16:00:00-05:00", "price": 37138, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-11T16:00:00-05:00", "price": 36555, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-12T16:00:00-05:00", "price": 41996, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-13T16:00:00-05:00", "price": 40372, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-14T16:00:00-05:00", "price": 39451, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-15T16:00:00-05:00", "price": 37445, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-16T16:00:00-05:00", "price": 38839, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-17T16:00:00-05:00", "price": 38293, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-18T16:00:00-05:00", "price": 37600, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-19T16:00:00-05:00", "price": 37412, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-20T16:00:00-05:00", "price": 35957, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-21T16:00:00-05:00", "price": 35259, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-22T16:00:00-05:00", "price": 35699, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-23T16:00:00-05:00", "price": 36286, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-24T16:00:00-05:00", "price": 38617, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-25T16:00:00-05:00", "price": 37919, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-26T16:00:00-05:00", "price": 36747, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-27T16:00:00-05:00", "price": 36762, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-28T16:00:00-05:00", "price": 38014, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-29T16:00:00-05:00", "price": 37410, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-11-30T16:00:00-05:00", "price": 37600, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-01T16:00:00-05:00", "price": 37806, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-02T16:00:00-05:00", "price": 37910, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-03T16:00:00-05:00", "price": 37774, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-04T16:00:00-05:00", "price": 37230, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-05T16:00:00-05:00", "price": 37705, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-06T16:00:00-05:00", "price": 37523, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-07T16:00:00-05:00", "price": 37395, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-08T16:00:00-05:00", "price": 36585, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}, {"timestamp": "2014-12-09T16:00:00-05:00", "price": 35202, "exchanges": ["bitstampUSD", "btceUSD", "bitfinexUSD"]}], "resolution": "1d", "name": "winkdexUSD", "end_time": "2014-12-10T16:00:00-05:00"}], "_links": {"self": {"href": "/api/v0/series"}}});
      fixtures.winkdex.series(yesterday, twoDaysAgo, function(err, series) {
        assert.ok(!err);
        assert.ok(series);
        assert.ok(Array.isArray(series.results));
        assert.equal(series.resolution, '1d');
        assert.equal(series.results.length, 183 );
        assert.equal(series.start_time.slice(0,10), '2014-06-10');
        assert.equal(series.end_time.slice(0,10), '2014-12-10');
        done();
      });
    });
  });
});
